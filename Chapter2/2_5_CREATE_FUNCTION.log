21:43:13 SQL> 
21:43:13 SQL> @wordcount.fun
21:43:13 SQL> CREATE OR REPLACE FUNCTION wordcount (str IN VARCHAR2)
21:43:13   2  	  RETURN PLS_INTEGER
21:43:13   3  AS
21:43:13   4  	  words PLS_INTEGER := 0;
21:43:13   5  	  len PLS_INTEGER := NVL(LENGTH(str), 0);
21:43:13   6  	  inside_a_word BOOLEAN;
21:43:13   7  BEGIN
21:43:13   8  	  FOR i IN 1..len + 1
21:43:13   9  	  LOOP
21:43:13  10  	      IF ASCII(SUBSTR(str, i, 1)) < 33 OR i > len
21:43:13  11  	      THEN
21:43:13  12  		  IF inside_a_word
21:43:13  13  		  THEN
21:43:13  14  		      words := words + 1;
21:43:13  15  		      inside_a_word := FALSE;
21:43:13  16  		  END IF;
21:43:13  17  	      ELSE
21:43:13  18  		  inside_a_word := TRUE;
21:43:13  19  	      END IF;
21:43:13  20  	  END LOOP;
21:43:13  21  	  RETURN words;
21:43:13  22  END;
21:43:13  23  /

Function created.

21:43:13 SQL> 
21:43:13 SQL> SPOOL OFF
