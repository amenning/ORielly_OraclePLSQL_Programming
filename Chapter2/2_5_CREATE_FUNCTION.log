16:50:39 SQL> 
16:50:39 SQL> @wordcount.fun
16:50:39 SQL> CREATE OR REPLACE FUNCTION wordcount (str IN VARCHAR2)
16:50:39   2  	  RETURN PLS_INTEGER
16:50:39   3  AS
16:50:39   4  	  words PLS_INTEGER := 0;
16:50:39   5  	  len PLS_INTEGER := NVL(LENGTH(str), 0);
16:50:39   6  	  inside_a_word BOOLEAN;
16:50:39   7  BEGIN
16:50:39   8  	  FOR i IN 1..len + 1
16:50:39   9  	  LOOP
16:50:39  10  	      IF ASCII(SUBSTR(str, i, 1)) < 33 OR i > len
16:50:39  11  	      THEN
16:50:39  12  		  IF inside_a_word
16:50:39  13  		  THEN
16:50:39  14  		      words := words + 1;
16:50:39  15  		      inside_a_word := FALSE;
16:50:39  16  		  END IF;
16:50:39  17  	      ELSE
16:50:39  18  		  inside_a_word := TRUE;
16:50:39  19  	      END IF;
16:50:39  20  	  END LOOP;
16:50:39  21  	  RETURN words;
16:50:39  22  END;
16:50:39  23  /

Function created.

16:50:39 SQL> 
16:50:39 SQL> SPOOL OFF
